---
title: vlock
date: 2026-01-18
tags:
  - it
  - 인프라
  - 운영체제_실무
  - 리눅스
  - 패키지
  - vlock
---
# 리눅스 터미널 보안: vlock으로 콘솔 잠금 관리

서버 관리 중 잠시 자리를 비워야 할 때, 또는 공용 서버에서 root 권한으로 작업 중일 때 터미널 세션을 안전하게 보호해야 함. 이럴 때 유용한 도구가 바로 `vlock` 임

## vlock이란?

`vlock`(Virtual Console Lock)은 리눅스의 가상 콘솔을 잠그는 경량 보안 도구. 현재 사용 중인 터미널만 잠그거나, 시스템의 모든 가상 콘솔을 동시에 잠글 수 있어 무단 접근을 효과적으로 차단할 수 있음 (esxi 의 가상 콘솔 같은게 virtual console)

### 주요 특징

- **선택적 잠금**: 현재 콘솔만 또는 모든 콘솔을 선택적으로 잠금
- **패스워드 기반 보안**: 현재 로그인한 사용자의 비밀번호로만 해제 가능
- **화면 보호 기능**: 일정 시간 후 화면 보호기 자동 실행
- **SysRq 키 보호**: 시스템 요청 키를 통한 우회 방지

## 설치 방법

대부분의 리눅스 배포판에서 패키지 매니저를 통해 간단히 설치할 수 있음.

**Debian/Ubuntu 계열:**

```bash
sudo apt-get update
sudo apt-get install vlock
```

**Red Hat/CentOS/Fedora 계열:**

```bash
sudo yum install vlock
# 또는
sudo dnf install vlock
```

**Arch Linux:**

```bash
sudo pacman -S vlock
```

설치 확인:

```bash
vlock --version
```

## 주요 옵션 및 사용법

|옵션|축약형|설명|
|---|---|---|
|`--current`|`-c`|현재 콘솔만 잠금 (다른 콘솔 전환 가능)|
|`--all`|`-a`|모든 가상 콘솔 잠금 (콘솔 전환 차단)|
|`--new`|`-n`|새 콘솔 할당 후 모든 콘솔 잠금|
|`--disable-sysrq`|`-s`|SysRq 키 비활성화 (보안 강화)|
|`--timeout <초>`|`-t <초>`|지정 시간 후 화면 보호기 실행|
|`--version`|`-v`|버전 정보 출력|
|`--help`|`-h`|도움말 출력|

## 사용 예시

### 1. 현재 콘솔만 잠금

```bash
vlock -c
```

가장 기본적인 사용법. 현재 작업 중인 터미널만 잠기며, `Ctrl+Alt+F1~F6`으로 다른 가상 콘솔로 전환은 가능. 개인 작업 환경에서 간단한 보호가 필요할 때 유용.

### 2. 모든 콘솔 완전 잠금

```bash
vlock -a
```

시스템의 모든 가상 콘솔을 잠금. 다른 콘솔로의 전환이 차단되므로 높은 보안이 필요한 상황에 적합. root 세션 보호나 공용 서버 관리 시 권장.

### 3. 새 콘솔에서 전체 잠금

```bash
vlock -n
```

새로운 가상 콘솔을 자동으로 할당한 후 모든 콘솔을 잠금. 작업 중인 화면을 그대로 두고 안전하게 잠글 때 유용.

### 4. 화면 보호기와 함께 사용

```bash
vlock -a -t 60
```

모든 콘솔을 잠그고, 60초 후에 화면 보호기를 실행. 에너지 절약과 보안을 동시에 확보할 수 있음.

### 5. 최대 보안 모드

```bash
vlock -a -s
```

모든 콘솔을 잠그고 SysRq 키도 비활성화. SysRq 키를 통한 시스템 명령 우회를 방지하여 최고 수준의 보안을 제공.

## 해제 방법

잠긴 터미널을 해제하려면 현재 로그인한 사용자의 비밀번호를 입력하면 됨. 비밀번호 입력 시 화면에는 아무것도 표시되지 않으니 정확히 입력 후 Enter를 누르기.

```
This TTY is now locked.

user's password: [비밀번호 입력]
```

## 보안 고려사항

### 장점

- **간단하고 빠른 보호**: 명령어 하나로 즉시 터미널 잠금
- **물리적 접근 차단**: 키보드 입력을 통한 무단 접근 방지
- **시스템 리소스 최소 사용**: 매우 가벼운 프로그램

### 주의사항

- **SSH 세션에는 부적합**: vlock은 로컬 가상 콘솔 전용입니다. SSH 세션 보호에는 `screen`이나 `tmux`의 잠금 기능을 사용
- **root 비밀번호 필수**: root로 잠근 경우 root 비밀번호가 필요하므로 비밀번호 분실 시 물리적 접근이나 단일 사용자 모드를 통해서만 해제 가능
- **원격 재부팅 취약**: 물리적 접근이 있는 공격자는 시스템을 재부팅할 수 있으므로 물리적 보안도 함께 고려해야 함

## vlock vs 다른 잠금 도구

|도구|용도|적용 범위|
|---|---|---|
|**vlock**|가상 콘솔 잠금|로컬 TTY|
|**screen -x**|터미널 멀티플렉서 잠금|SSH/로컬 세션|
|**tmux**|터미널 멀티플렉서 잠금|SSH/로컬 세션|
|**xlock/i3lock**|그래픽 환경 잠금|X Window System|

## 실무 활용 팁

### 별칭(alias) 설정

자주 사용하는 옵션을 별칭으로 등록하면 편리함.

```bash
# ~/.bashrc 또는 ~/.zshrc에 추가
alias lock='vlock -a'
alias slock='vlock -a -s'  # secure lock
```

### 자동 잠금 스크립트

일정 시간 동안 입력이 없을 때 자동으로 잠그는 스크립트 예시:

```bash
#!/bin/bash
# auto-lock.sh
IDLE_TIME=300  # 5분 (초 단위)

while true; do
    IDLE=$(w -h | awk '{print $5}' | sed 's/[^0-9]//g' | sort -n | tail -1)
    if [ "$IDLE" -gt "$IDLE_TIME" ]; then
        vlock -a
    fi
    sleep 60
done
```

### 서버 관리자를 위한 베스트 프랙티스

1. **root 작업 시 항상 잠금 사용**: `sudo su` 후 작업 중 자리를 비울 때는 반드시 `vlock -a -s` 실행
2. **공용 서버는 전체 잠금**: 여러 사용자가 접근하는 서버에서는 `-a` 옵션 필수
3. **물리적 보안과 병행**: vlock만으로는 시스템 재부팅 등 물리적 공격을 막을 수 없으므로 서버실 출입 통제 등 물리적 보안도 함께 고려

## 문제 해결

### vlock이 응답하지 않을 때

다른 TTY로 전환(`Ctrl+Alt+F2`)하여 로그인 후 해당 프로세스를 종료할 수 있음:

```bash
ps aux | grep vlock
sudo kill -9 [PID]
```

### 비밀번호를 잊었을 때

물리적 접근이 가능하다면 GRUB에서 단일 사용자 모드로 부팅하여 비밀번호를 재설정할 수 있음.

## 요약

`vlock`은 리눅스 시스템 관리자와 개발자에게 필수적인 간단하지만 강력한 보안 도구. 특히 물리적 접근이 가능한 환경에서 터미널 세션을 보호하는 데 매우 효과적.