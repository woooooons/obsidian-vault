---
title: 라우팅
date: 2025-12-03
tags:
  - it
  - CS
  - 네트워크
  - 라우팅
---
# 1. 라우팅의 핵심 개념

라우팅은 네트워크 레벨에서 **최적 경로 선택**을 수행하는 기능이다.  
라우터는 수신한 패킷의 **목적지 IP 주소**를 보고, 라우팅 테이블에서 가장 적합한 경로를 선택하여 다음 홉(Next Hop) 또는 인터페이스를 결정한다.

핵심 요소:

- 목적지 IP
    
- 라우팅 테이블(Route Table)
    
- 네트워크 prefix(예: 192.168.10.0/24)
    
- Next Hop
    
- 최장 prefix-matching
    

---

# 2. 라우터가 패킷을 처리하는 실제 과정

1. 패킷 수신
    
2. 목적지 IP(Destination IP) 확인
    
3. 라우팅 테이블에서 **Longest Prefix Match** 수행
    
4. 해당 항목의 Next Hop 또는 인터페이스 선택
    
5. MAC 주소 확인(ARP 사용)
    
6. 패킷 전송(Forwarding)
    

즉, 라우팅은 IP 레벨의 "논리적 경로 선택",  
포워딩은 실제 패킷을 인터페이스로 밀어 보내는 "물리적 동작".

---

# 3. 라우팅 테이블의 구조

라우터는 아래와 같은 테이블을 가진다:

|Prefix|Next Hop|Interface|Metric|Type|
|---|---|---|---|---|
|192.168.1.0/24|—|eth0|—|Connected|
|192.168.2.0/24|192.168.1.1|eth0|1|Static|
|0.0.0.0/0|203.0.113.1|eth1|20|Default|

Prefix는 "어떤 네트워크로 가는 경로인가"를 의미하고,  
Next Hop은 그 경로로 가려면 패킷을 넘겨야 할 장치.

**라우팅의 기본 규칙: Longest Prefix Match**  
여러 경로가 후보로 나온다면, 가장 길게 일치하는 prefix(/숫자가 더 큰 것)가 승리.

---

# 4. 정적 라우팅 vs 동적 라우팅

## 4-1. 정적 라우팅(Static Routing)

관리자가 직접 라우트를 수동 입력.

/24 네트워크로 가려면 Router B로 보내라 → 이런 식  
특징:

- 예측 가능
    
- 단순한 구조
    
- 장애 발생 시 자동 대체 경로 없음
    

사용 예:  
소규모 사설망, 고정된 아키텍처, 보안망 내부

---

## 4-2. 동적 라우팅(Dynamic Routing)

라우터끼리 “경로 정보”를 교환하며 라우팅 테이블을 자동 업데이트.

대표 프로토콜:

- **RIP** – 거리 벡터(Distance Vector)
    
- **OSPF** – 링크 상태(Link State)
    
- **EIGRP** – 하이브리드
    
- **BGP** – 자율시스템(AS) 간 라우팅
    

기능:

- 장애 발생 시 자동 대체 경로 선택
    
- 가장 빠르고 안정적인 경로 결정
    

---

# 5. 경로 선택 알고리즘

## 5-1. Distance Vector (거리 벡터)

대표: RIP  
구조:

- “이 네트워크까지 몇 홉(Hop)이냐”만 중요
    
- 최소 홉수를 가진 경로 선택
    

단점:

- Best path가 항상 최단 지연 경로가 아닌 경우 많음
    
- 수렴 느림
    

## 5-2. Link State (링크 상태)

대표: OSPF  
구조:

- 전체 네트워크 구조를 그래프로 파악
    
- Dijkstra 알고리즘 기반으로 최단 경로 계산
    

특징:

- 빠르고 정확
    
- 대규모 네트워크에서 필수
    

## 5-3. Path Vector

대표: BGP  
구조:

- 여러 자율 시스템(AS) 간의 경로와 정책 기반 선택
    
- “최단 거리”가 아니라 조직 간 정책이 중요
    

사용:

- 인터넷 계층에서 사용하는 핵심 라우팅
    

---

# 6. Default Route (기본 경로)

라우팅 테이블에서 경로가 **명시적으로 존재하지 않을 때** 사용하는 경로.

예:

```
0.0.0.0/0 via 192.168.1.1
```

의미:

- “모든 목적지는 192.168.1.1로 보내라”
    
- 집에서 인터넷 쓸 때 공유기가 이걸 사용
    

---

# 7. 내부 라우팅 vs 외부 라우팅

|구분|의미|대표|
|---|---|---|
|IGP (Interior Gateway Protocol)|조직 내부 네트워크 라우팅|OSPF, RIP, EIGRP|
|EGP (Exterior Gateway Protocol)|ISP·기업·국가 등 AS 간 라우팅|BGP|

모든 인터넷의 최상위 라우팅은 BGP 기반으로 움직인다.

---

# 8. 라우팅과 스위칭 차이

|스위칭|라우팅|
|---|---|
|MAC 주소 기반|IP 주소 기반|
|L2|L3|
|같은 네트워크 내부|네트워크 간 이동|
|브로드캐스트 도메인 유지|브로드캐스트 도메인 분리|

라우터가 네트워크를 구획하고, 스위치는 그 안에서 패킷 분배.

---

# 9. 라우팅이 필요한 이유

- 서로 다른 네트워크를 오가야 하기 때문
    
- 네트워크 분리(VLAN) 후 통신 필요
    
- 인터넷 접근 필요
    
- 장애 시 우회한 경로 제공
    
- 대규모 네트워크 트래픽 효율화
    

---

# 10. 라우팅을 처음 공부할 때 반드시 잡아야 하는 세 개의 축

1. **Longest Prefix Match**  
    어떤 경로를 선택할지 결정하는 절대 기준.
    
2. **Routing Table 구조 이해**  
    패킷이 어디로 가는지 눈에 보임.
    
3. **IGP vs EGP 개념**  
    인터넷 구조의 핵심 원리.
    

---

# 참고문서

- RFC 1812 (라우터 요구사항)  
    [https://datatracker.ietf.org/doc/html/rfc1812](https://datatracker.ietf.org/doc/html/rfc1812)
    
- RFC 4271 (BGP-4)  
    [https://datatracker.ietf.org/doc/html/rfc4271](https://datatracker.ietf.org/doc/html/rfc4271)
    
- RFC 2328 (OSPFv2)  
    [https://datatracker.ietf.org/doc/html/rfc2328](https://datatracker.ietf.org/doc/html/rfc2328)
    

